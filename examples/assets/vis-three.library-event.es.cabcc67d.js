import{c as U}from"./CSS3DRenderer.56d2804d.js";import{l as R,a5 as L,G as M,aU as P,w as E,I as D}from"./three.3f33d046.js";var b={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?.5*(t*t*((n+1)*t-n)):.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-b.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?b.Bounce.In(t*2)*.5:b.Bounce.Out(t*2-1)*.5+.5}}},I;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?I=function(){var t=process.hrtime();return t[0]*1e3+t[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?I=self.performance.now.bind(self.performance):Date.now!==void 0?I=Date.now:I=function(){return new Date().getTime()};var j=I,Q=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var n=this;return Object.keys(this._tweens).map(function(e){return n._tweens[e]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(n){this._tweens[n.getId()]=n,this._tweensAddedDuringUpdate[n.getId()]=n},t.prototype.remove=function(n){delete this._tweens[n.getId()],delete this._tweensAddedDuringUpdate[n.getId()]},t.prototype.update=function(n,e){n===void 0&&(n=j()),e===void 0&&(e=!1);var r=Object.keys(this._tweens);if(r.length===0)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var o=this._tweens[r[i]],c=!e;o&&o.update(n,c)===!1&&!e&&delete this._tweens[r[i]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),C={Linear:function(t,n){var e=t.length-1,r=e*n,i=Math.floor(r),o=C.Utils.Linear;return n<0?o(t[0],t[1],r):n>1?o(t[e],t[e-1],e-r):o(t[i],t[i+1>e?e:i+1],r-i)},Bezier:function(t,n){for(var e=0,r=t.length-1,i=Math.pow,o=C.Utils.Bernstein,c=0;c<=r;c++)e+=i(1-n,r-c)*i(n,c)*t[c]*o(r,c);return e},CatmullRom:function(t,n){var e=t.length-1,r=e*n,i=Math.floor(r),o=C.Utils.CatmullRom;return t[0]===t[e]?(n<0&&(i=Math.floor(r=e*(1+n))),o(t[(i-1+e)%e],t[i],t[(i+1)%e],t[(i+2)%e],r-i)):n<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):n>1?t[e]-(o(t[e],t[e],t[e-1],t[e-1],r-e)-t[e]):o(t[i?i-1:0],t[i],t[e<i+1?e:i+1],t[e<i+2?e:i+2],r-i)},Utils:{Linear:function(t,n,e){return(n-t)*e+t},Bernstein:function(t,n){var e=C.Utils.Factorial;return e(t)/e(n)/e(t-n)},Factorial:function(){var t=[1];return function(n){var e=1;if(t[n])return t[n];for(var r=n;r>1;r--)e*=r;return t[n]=e,e}}(),CatmullRom:function(t,n,e,r,i){var o=(e-t)*.5,c=(r-n)*.5,a=i*i,s=i*a;return(2*n-2*e+o+c)*s+(-3*n+3*e-2*o-c)*a+o*i+n}}},F=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),B=new Q,f=function(){function t(n,e){e===void 0&&(e=B),this._object=n,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=b.Linear.None,this._interpolationFunction=C.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=F.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(n,e){return this._valuesEnd=Object.create(n),e!==void 0&&(this._duration=e),this},t.prototype.duration=function(n){return this._duration=n,this},t.prototype.start=function(n){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var e in this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=n!==void 0?typeof n=="string"?j()+parseFloat(n):n:j(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(n,e,r,i){for(var o in r){var c=n[o],a=Array.isArray(c),s=a?"array":typeof c,l=!a&&Array.isArray(r[o]);if(!(s==="undefined"||s==="function")){if(l){var u=r[o];if(u.length===0)continue;u=u.map(this._handleRelativeValue.bind(this,c)),r[o]=[c].concat(u)}if((s==="object"||a)&&c&&!l){e[o]=a?[]:{};for(var d in c)e[o][d]=c[d];i[o]=a?[]:{},this._setupProperties(c,e[o],r[o],i[o])}else typeof e[o]=="undefined"&&(e[o]=c),a||(e[o]*=1),l?i[o]=r[o].slice().reverse():i[o]=e[o]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(n){return n===void 0&&(n=j()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=n,this._group&&this._group.remove(this),this)},t.prototype.resume=function(n){return n===void 0&&(n=j()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=n-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},t.prototype.stopChainedTweens=function(){for(var n=0,e=this._chainedTweens.length;n<e;n++)this._chainedTweens[n].stop();return this},t.prototype.group=function(n){return this._group=n,this},t.prototype.delay=function(n){return this._delayTime=n,this},t.prototype.repeat=function(n){return this._initialRepeat=n,this._repeat=n,this},t.prototype.repeatDelay=function(n){return this._repeatDelayTime=n,this},t.prototype.yoyo=function(n){return this._yoyo=n,this},t.prototype.easing=function(n){return this._easingFunction=n,this},t.prototype.interpolation=function(n){return this._interpolationFunction=n,this},t.prototype.chain=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return this._chainedTweens=n,this},t.prototype.onStart=function(n){return this._onStartCallback=n,this},t.prototype.onUpdate=function(n){return this._onUpdateCallback=n,this},t.prototype.onRepeat=function(n){return this._onRepeatCallback=n,this},t.prototype.onComplete=function(n){return this._onCompleteCallback=n,this},t.prototype.onStop=function(n){return this._onStopCallback=n,this},t.prototype.update=function(n,e){if(n===void 0&&(n=j()),e===void 0&&(e=!0),this._isPaused)return!0;var r,i,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(n>o)return!1;e&&this.start(n)}if(this._goToEnd=!1,n<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(n-this._startTime)/this._duration,i=this._duration===0||i>1?1:i;var c=this._easingFunction(i);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,c),this._onUpdateCallback&&this._onUpdateCallback(this._object,i),i===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(r in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[r]=="string"&&(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=n+this._repeatDelayTime:this._startTime=n+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,s=this._chainedTweens.length;a<s;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(n,e,r,i){for(var o in r)if(e[o]!==void 0){var c=e[o]||0,a=r[o],s=Array.isArray(n[o]),l=Array.isArray(a),u=!s&&l;u?n[o]=this._interpolationFunction(a,i):typeof a=="object"&&a?this._updateProperties(n[o],c,a,i):(a=this._handleRelativeValue(c,a),typeof a=="number"&&(n[o]=c+(a-c)*i))}},t.prototype._handleRelativeValue=function(n,e){return typeof e!="string"?e:e.charAt(0)==="+"||e.charAt(0)==="-"?n+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(n){var e=this._valuesStartRepeat[n],r=this._valuesEnd[n];typeof r=="string"?this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(r):this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=e},t}();F.nextId;var v=B;v.getAll.bind(v);v.removeAll.bind(v);v.add.bind(v);v.remove.bind(v);v.update.bind(v);const G={name:"addClass",params:{target:"",className:"",delay:0}},$=function(t,n){const e=n.params,r=[];if(e.target==="all")t.scene.traverse(i=>{i instanceof U&&r.push(i)});else if(Array.isArray(e.target))e.target.forEach(i=>{const o=t.getObjectBySymbol(i);o?r.push(o):console.warn(`basic event AddClass: can not found vid object: ${e.target}`)});else{const i=t.getObjectBySymbol(e.target);if(!i)return console.warn(`basic event AddClass: can not found vid object: ${e.target}`),()=>{};if(!(i instanceof U))return console.warn("basic event AddClass: object is not a CSS3DObject."),()=>{};r.push(i)}return r.length?()=>{setTimeout(()=>{r.forEach(i=>{i.element.classList.add(e.className)})},e.delay)}:(console.warn(`basic event AddClass: can not found vid object: ${e.target}`),()=>{})},k=Object.freeze(Object.defineProperty({__proto__:null,config:G,generator:$},Symbol.toStringTag,{value:"Module"})),W={name:"changeCamera",params:{camera:"",delay:0}},q=function(t,n){const e=n.params;return()=>{setTimeout(()=>{t.setCameraBySymbol(e.camera)},e.delay)}},H=Object.freeze(Object.defineProperty({__proto__:null,config:W,generator:q},Symbol.toStringTag,{value:"Module"})),J={name:"changeScene",params:{scene:"Scene",delay:0}},K=function(t,n){const e=n.params;return()=>{setTimeout(()=>{t.setSceneBySymbol(e.scene)},e.delay)}},X=Object.freeze(Object.defineProperty({__proto__:null,config:J,generator:K},Symbol.toStringTag,{value:"Module"})),Y={name:"openWindow",params:{url:""}},Z=function(t,n){return()=>{window.open(n.params.url)}},V=Object.freeze(Object.defineProperty({__proto__:null,config:Y,generator:Z},Symbol.toStringTag,{value:"Module"})),tt={name:"switchAnimate",params:{target:"",toggle:"auto",delay:0}},et=function(t,n){const e=n.params,r=t.getConfigBySymbol(e.target);return r?()=>{setTimeout(()=>{if(e.toggle==="auto"){r.play!=r.play;return}if(e.toggle==="off"){r.play=!1;return}if(e.toggle==="on"){r.play=!0;return}},e.delay)}:(console.warn(`basic event switchAnimate: can not found vid config: ${e.target}`),()=>{})},nt=Object.freeze(Object.defineProperty({__proto__:null,config:tt,generator:et},Symbol.toStringTag,{value:"Module"})),rt={name:"visibleObject",params:{target:"",visible:!0,delay:0}},it=function(t,n){const e=n.params,r=t.getObjectBySymbol(e.target);return r?()=>{setTimeout(()=>{r.visible=e.visible},e.delay)}:(console.warn(`basic event visibleObject: can not found vid object: ${e.target}`),()=>{})},ot=Object.freeze(Object.defineProperty({__proto__:null,config:rt,generator:it},Symbol.toStringTag,{value:"Module"})),at={name:"setPosition",params:{target:"",position:{x:0,y:0,z:0},delay:0}},st=function(t,n){const e=n.params,r=t.getConfigBySymbol(e.target);return r?()=>{setTimeout(()=>{r.position.x=e.position.x,r.position.y=e.position.y,r.position.z=e.position.z},e.delay)}:(console.warn(`basic event setPosition: can not found vid config: ${e.target}`),()=>{})},ct=Object.freeze(Object.defineProperty({__proto__:null,config:at,generator:st},Symbol.toStringTag,{value:"Module"})),lt={name:"setParent",params:{target:"",parent:"",delay:0}},ut=function(t,n){const e=n.params,r=t.getConfigBySymbol(e.parent);return r?()=>{setTimeout(()=>{r.children.includes(e.target)||r.children.push(e.target)},e.delay)}:(console.warn(`basic event setParent: can not found vid config: ${e.parent}`),()=>{})},dt=Object.freeze(Object.defineProperty({__proto__:null,config:lt,generator:ut},Symbol.toStringTag,{value:"Module"})),ft={name:"changeCursor",params:{cursor:"",delay:0}},pt=function(t,n){const e=n.params;return()=>{setTimeout(()=>{document.body.style.cursor=e.cursor},e.delay)}},gt=Object.freeze(Object.defineProperty({__proto__:null,config:ft,generator:pt},Symbol.toStringTag,{value:"Module"}));var h=(t=>(t.EASING_LINEAR_NONE="EASING_LINEAR_NONE",t.EASING_QUARTIC_IN="EASING_QUARTIC_IN",t.EASING_QUARTIC_OUT="EASING_QUARTIC_OUT",t.EASING_QUARTIC_INOUT="EASING_QUARTIC_INOUT",t.EASING_QUADRATIC_IN="EASING_QUADRATIC_IN",t.EASING_QUADRATIC_OUT="EASING_QUADRATIC_OUT",t.EASING_QUADRATIC_INOUT="EASING_QUADRATIC_INOUT",t))(h||{});const p={EASING_LINEAR_NONE:b.Linear.None,EASING_QUARTIC_IN:b.Quartic.In,EASING_QUARTIC_OUT:b.Quartic.Out,EASING_QUARTIC_INOUT:b.Quartic.InOut,EASING_QUADRATIC_IN:b.Quadratic.In,EASING_QUADRATIC_OUT:b.Quadratic.Out,EASING_QUADRATIC_INOUT:b.Quadratic.InOut},yt={name:"colorChange",params:{target:"",attribute:"color",color:"rgb(255, 255, 255)",delay:0,duration:500,timingFunction:h.EASING_QUADRATIC_INOUT}},_t=function(t,n){const e=n.params,r=t.getObjectBySymbol(e.target);if(!r)return console.warn(`real time animation ColorChange: can not found vid material: ${e.target}`),()=>{};if(!r[e.attribute]||!(r[e.attribute]instanceof R))return console.warn(`real time animation ColorChange: material attribute is illeage: ${e.attribute}`),()=>{};const i=t.getConfigBySymbol(e.target);if(!i)return console.warn(`real time animation ColorChange: can not found material config: ${e.target}`),()=>{};const o=new R(e.color),c=t.renderManager;let a=!1;return()=>{if(a)return;a=!0;const s=new f(r[e.attribute]).to({r:o.r,g:o.g,b:o.b}).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),l=u=>{s.update()};c.addEventListener("render",l),s.onComplete(()=>{c.removeEventListener("render",l),i[e.attribute]=e.color,a=!1})}},ht=Object.freeze(Object.defineProperty({__proto__:null,config:yt,generator:_t},Symbol.toStringTag,{value:"Module"})),mt={name:"fadeObject",params:{target:"",direction:"out",delay:0,duration:300,timingFunction:h.EASING_QUADRATIC_INOUT,visible:!0}},bt=function(t,n){const e=n.params,r=t.getObjectBySymbol(e.target);if(!r)return console.warn(`real time animation fadeObject: can not found vid object: ${e.target}`),()=>{};const i=t.getObjectConfig(r);if(!i.material)return console.warn(`real time animation fadeObject: target can not support fade: ${e.target}`),()=>{};const o=[],c=[],a=Array.isArray(i.material)?[].concat(i.material):[i.material];for(const l of a){const u=t.getObjectBySymbol(l),d=t.getConfigBySymbol(l);if(!(u instanceof L)){console.error(`real time animation fadeObject: object config material is not instanceof Material: ${l}`);continue}if(!d){console.error(`real time animation fadeObject: object config material can not found config: ${l}`);continue}o.push(u),c.push(d)}let s=!1;return()=>{if(s)return;s=!0;const l=t.renderManager;i.visible=!0,o.forEach((u,d,m)=>{u.visible=!0,u.transparent=!0,u.opacity=e.direction==="in"?0:1,u.needsUpdate=!0;const _=new f(u).to({opacity:e.direction==="in"?1:0}).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),y=S=>{_.update()};l.addEventListener("render",y),_.onComplete(()=>{l.removeEventListener("render",y),e.direction==="out"&&e.visible?(c[d].visible=!1,i.visible=!1):e.direction==="in"&&e.visible&&(c[d].visible=!0,i.visible=!0),c[d].opacity=e.direction==="in"?1:0,s=!1})})}},vt=Object.freeze(Object.defineProperty({__proto__:null,config:mt,generator:bt},Symbol.toStringTag,{value:"Module"})),St={name:"focusObject",params:{target:"",camera:"",space:"world",offset:{x:0,y:0,z:20},delay:0,duration:1e3,timingFunction:h.EASING_QUADRATIC_INOUT,back:!0}},Tt=function(t,n){const e=n.params,r=t.getObjectBySymbol(e.target),i=t.orbitControls.target;if(!r)return console.warn(`real time animation focusObject: can not found vid object: ${e.target}`),()=>{};if(!(r instanceof M))return console.warn(`real time animation focusObject: vid object is not a class of THREE.Object3D: ${e.target}`),()=>{};let o=!1;const c=new P;return()=>{if(o)return;o=!0;let a=t.camera;e.camera&&(a=t.getObjectBySymbol(e.camera),a||(a=t.camera,console.warn(`real time animation focusObject: can not found camera config: ${e.camera}`)));const s=t.getObjectConfig(a),l=t.orbitControls&&t.orbitControls.object===a;s||console.warn("engine current camera can not found config.");const u=t.renderManager;let d={x:r.matrixWorld.elements[12]+e.offset.x,y:r.matrixWorld.elements[13]+e.offset.y,z:r.matrixWorld.elements[14]+e.offset.z};const m={x:a.position.x,y:a.position.y,z:a.position.z};if(e.space==="local"){const g=new E(e.offset.x,e.offset.y,e.offset.z).applyEuler(c.setFromRotationMatrix(r.matrixWorld));d={x:r.matrixWorld.elements[12]+g.x,y:r.matrixWorld.elements[13]+g.y,z:r.matrixWorld.elements[14]+g.z}}const _=new f(a.position).to(d).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start();let y;const S={x:a.up.x,y:a.up.y,z:a.up.z};if(e.space==="local"){const g=new E(0,1,0).applyEuler(c.setFromRotationMatrix(r.matrixWorld));y=new f(a.up).to({x:g.x,y:g.y,z:g.z}).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start()}let T;const w={x:i.x,y:i.y,z:i.z};l&&(T=new f(i).to({x:r.matrixWorld.elements[12],y:r.matrixWorld.elements[13],z:r.matrixWorld.elements[14]}).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start());let O;l&&e.space==="local"?O=g=>{_.update(),y.update(),T.update()}:l?O=g=>{_.update(),T.update()}:e.space==="local"?O=g=>{_.update(),y.update()}:O=g=>{_.update()},u.addEventListener("render",O),_.onComplete(()=>{if(u.removeEventListener("render",O),s&&(s.position.x=d.x,s.position.y=d.y,s.position.z=d.z),o=!1,e.back){const g=()=>{const A=new f(a.position).to(m).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start();let x;e.space==="local"&&(x=new f(a.up).to(S).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start());let z;l&&(z=new f(i).to(w).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start());const N=Yt=>{A.update(),x&&x.update(),z&&z.update()};A.onComplete(()=>{u.removeEventListener("render",N)}),u.addEventListener("render",N),document.removeEventListener("dblclick",g)};document.addEventListener("dblclick",g)}})}},Ot=Object.freeze(Object.defineProperty({__proto__:null,config:St,generator:Tt},Symbol.toStringTag,{value:"Module"})),jt={name:"moveFromTo",params:{target:"",from:{x:0,y:0,z:0},to:{x:10,y:10,z:10},delay:0,duration:1e3,timingFunction:h.EASING_QUADRATIC_INOUT}},It=function(t,n){const e=n.params,r=t.compilerManager.getObjectBySymbol(e.target);if(!r)return console.warn(`real time animation moveTO: can not found vid object: ${e.target}`),()=>{};const i=t.renderManager,o=t.dataSupportManager.getConfigBySymbol(e.target);if(!o)return console.warn(`can not found object config: ${e.target}`),()=>{};let c=!1;return()=>{if(c)return;c=!0,r.position.set(e.from.x,e.from.y,e.from.z),r.updateMatrix(),r.updateMatrixWorld();const a=new f(r.position).to(e.to).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),s=l=>{a.update()};i.addEventListener("render",s),a.onComplete(()=>{i.removeEventListener("render",s),o.position.x=e.to.x,o.position.y=e.to.y,o.position.z=e.to.z,c=!1})}},Ct=Object.freeze(Object.defineProperty({__proto__:null,config:jt,generator:It},Symbol.toStringTag,{value:"Module"})),wt={name:"moveSpacing",params:{target:"",spacing:{x:10,y:10,z:10},delay:0,duration:1e3,timingFunction:h.EASING_QUADRATIC_INOUT}},At=function(t,n){const e=n.params,r=t.getObjectBySymbol(e.target);if(!r)return console.warn(`can not found vid object: ${e.target}`),()=>{};if(!(r instanceof M))return console.warn(`object is not instanceof Object3D: ${e.target}`),()=>{};const i=t.renderManager,o=t.getConfigBySymbol(e.target);let c=!1;return()=>{if(c)return;c=!0;const a={x:r.position.x+e.spacing.x,y:r.position.y+e.spacing.y,z:r.position.z+e.spacing.z},s=new f(r.position).to(a).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),l=u=>{s.update()};i.addEventListener("render",l),s.onComplete(()=>{i.removeEventListener("render",l),o.position.x=a.x,o.position.y=a.y,o.position.z=a.z,c=!1})}},xt=Object.freeze(Object.defineProperty({__proto__:null,config:wt,generator:At},Symbol.toStringTag,{value:"Module"})),zt={name:"moveTo",params:{target:"",position:{x:0,y:0,z:0},delay:0,duration:1e3,timingFunction:h.EASING_QUADRATIC_INOUT}},Et=function(t,n){const e=n.params,r=t.compilerManager.getObjectBySymbol(e.target);if(!r)return console.warn(`real time animation moveTO: can not found vid object: ${e.target}`),()=>{};const i=t.renderManager,o=t.dataSupportManager.getConfigBySymbol(e.target);if(!o)return console.warn(`can not found object config: ${e.target}`),()=>{};let c=!1;return()=>{if(c)return;c=!0;const a=new f(r.position).to(e.position).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),s=l=>{a.update()};i.addEventListener("render",s),a.onComplete(()=>{i.removeEventListener("render",s),o.position.x=e.position.x,o.position.y=e.position.y,o.position.z=e.position.z,c=!1})}},Mt=Object.freeze(Object.defineProperty({__proto__:null,config:zt,generator:Et},Symbol.toStringTag,{value:"Module"})),Nt={name:"moveToObject",params:{target:"",to:"",offset:{x:0,y:0,z:0},delay:0,duration:1e3,timingFunction:h.EASING_QUADRATIC_INOUT}},Ut=function(t,n){const e=n.params,r=t.compilerManager,i=r.getObjectBySymbol(e.target),o=r.getObjectBySymbol(e.to);if(!i)return console.warn(`real time animation MoveToObject: can not found vid object: ${e.target}`),()=>{};if(!o)return console.warn(`real time animation MoveToObject: can not found vid object: ${e.target}`),()=>{};const c=t.renderManager,a=t.dataSupportManager.getConfigBySymbol(e.target);if(!a)return console.warn(`can not found object config: ${e.target}`),()=>{};let s=!1;return()=>{if(s)return;s=!0;const l={x:o.position.x+e.offset.x,y:o.position.y+e.offset.y,z:o.position.z+e.offset.z},u=new f(i.position).to(l).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),d=m=>{u.update()};c.addEventListener("render",d),u.onComplete(()=>{c.removeEventListener("render",d),a.position.x=l.x,a.position.y=l.y,a.position.z=l.z,s=!1})}},Rt=Object.freeze(Object.defineProperty({__proto__:null,config:Nt,generator:Ut},Symbol.toStringTag,{value:"Module"})),Pt={name:"orbitTargetMove",params:{target:"",offset:{x:0,y:0,z:0},delay:0,duration:1e3,timingFunction:h.EASING_QUADRATIC_INOUT}},Ft=function(t,n){const e=n.params;if(t.compilerManager,!t.orbitControls)return console.warn("real time animation orbitTargetMove: engine can not install orbitControls."),()=>{};const r=t.renderManager;let i=!1;return()=>{if(i)return;i=!0;let o=e.offset;if(e.target){const s=t.getObjectBySymbol(e.target);s?o={x:s.matrixWorld.elements[12]+o.x,y:s.matrixWorld.elements[13]+o.y,z:s.matrixWorld.elements[14]+o.z}:console.warn(`real time animation orbitTargetMove: can not found vid object: ${e.target}`)}const c=new f(t.orbitControls.target).to(o).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),a=s=>{c.update()};r.addEventListener("render",a),c.onComplete(()=>{r.removeEventListener("render",a),i=!1})}},Bt=Object.freeze(Object.defineProperty({__proto__:null,config:Pt,generator:Ft},Symbol.toStringTag,{value:"Module"})),Lt={name:"rotationTo",params:{target:"",rotation:{x:0,y:0,z:0},delay:0,duration:1e3,timingFunction:h.EASING_QUADRATIC_INOUT}},Dt=function(t,n){const e=n.params,r=t.compilerManager.getObjectBySymbol(e.target);if(!r)return console.warn(`real time animation moveTO: can not found vid object: ${e.target}`),()=>{};const i=t.renderManager,o=t.dataSupportManager.getConfigBySymbol(e.target);if(!o)return console.warn(`can not found object config: ${e.target}`),()=>{};let c=!1;return()=>{if(c)return;c=!0;const a=new f(r.rotation).to(e.rotation).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),s=l=>{a.update()};i.addEventListener("render",s),a.onComplete(()=>{i.removeEventListener("render",s),o.rotation.x=e.rotation.x,o.rotation.y=e.rotation.y,o.rotation.z=e.rotation.z,c=!1})}},Qt=Object.freeze(Object.defineProperty({__proto__:null,config:Lt,generator:Dt},Symbol.toStringTag,{value:"Module"})),Gt={name:"showToCamera",params:{target:"",offset:{x:0,y:0,z:-30},delay:0,duration:1e3,timingFunction:h.EASING_QUADRATIC_INOUT,back:!0}},$t=function(t,n){const e=n.params,r=t.getObjectBySymbol(e.target),i=t.getConfigBySymbol(e.target),o=t.camera;if(!r)return console.warn(`real time animation showToCamera: can not found vid object: ${e.target}`),()=>{};if(!r)return console.warn(`real time animation showToCamera: can not found vid config: ${e.target}`),()=>{};if(!(r instanceof M))return console.warn(`real time animation showToCamera: vid object is not a class of THREE.Object3D: ${e.target}`),()=>{};const c=new D,a=new P,s=new E;let l=!1;return()=>{if(l)return;l=!0;const u=t.renderManager;s.set(e.offset.x,e.offset.y,e.offset.z).applyEuler(o.rotation),s.set(o.position.x+s.x,o.position.y+s.y,o.position.z+s.z),c.lookAt(o.position,s,o.up),a.setFromRotationMatrix(c);const d={x:r.position.x,y:r.position.y,z:r.position.z},m={x:r.rotation.x,y:r.rotation.y,z:r.rotation.z},_=new f(r.position).to({x:s.x,y:s.y,z:s.z}).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),y=new f(r.rotation).to({x:a.x,y:a.y,z:a.z}).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),S=T=>{_.update(),y.update()};u.addEventListener("render",S),_.onComplete(()=>{if(u.removeEventListener("render",S),i.position.x=s.x,i.position.y=s.y,i.position.z=s.z,i.rotation.x=a.x,i.rotation.y=a.y,i.rotation.z=a.z,l=!1,e.back){const T=()=>{const w=new f(r.position).to(d).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),O=new f(r.rotation).to(m).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),g=A=>{w.update(),O.update()};w.onComplete(()=>{u.removeEventListener("render",g),i.position.x=d.x,i.position.y=d.y,i.position.z=d.z,i.rotation.x=m.x,i.rotation.y=m.y,i.rotation.z=m.z}),u.addEventListener("render",g),document.removeEventListener("dblclick",T)};document.addEventListener("dblclick",T)}})}},kt=Object.freeze(Object.defineProperty({__proto__:null,config:Gt,generator:$t},Symbol.toStringTag,{value:"Module"})),Wt={name:"upTo",params:{target:"",up:{x:0,y:1,z:0},delay:0,duration:1e3,timingFunction:h.EASING_QUADRATIC_INOUT}},qt=function(t,n){const e=n.params,r=t.compilerManager.getObjectBySymbol(e.target);if(!r)return console.warn(`real time animation upTo: can not found vid object: ${e.target}`),()=>{};const i=t.renderManager,o=t.dataSupportManager.getConfigBySymbol(e.target);if(!o)return console.warn(`can not found object config: ${e.target}`),()=>{};let c=!1;return()=>{if(c)return;c=!0;const a=new f(r.up).to(e.up).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),s=l=>{a.update()};i.addEventListener("render",s),a.onComplete(()=>{i.removeEventListener("render",s),o.up.x=e.up.x,o.up.y=e.up.y,o.up.z=e.up.z,c=!1})}},Ht=Object.freeze(Object.defineProperty({__proto__:null,config:Wt,generator:qt},Symbol.toStringTag,{value:"Module"})),Jt={name:"vector3To",params:{target:"",attribute:".position",props:{x:"x",y:"y",z:"z"},delay:0,duration:500,to:{},compiling:!1,timingFunction:h.EASING_QUADRATIC_INOUT}},Kt=function(t,n){var d,m,_;const e=n.params,r=t.compilerManager.getObjectBySymbol(e.target);if(!r)return console.warn(`real time animation vector3To: can not found vid object: ${e.target}`),()=>{};const i=t.renderManager;let o=t.dataSupportManager.getConfigBySymbol(e.target);if(!o)return console.warn(`real time animation vector3To: can not found object config: ${e.target}`),()=>{};const c=e.attribute.split(".");c.shift();let a=r;for(const y of c){if(a[y]===void 0)return console.error(`real time animation vector3To: object can not support key: ${y}`,r),()=>{};a=a[y],o=o[y]}const s=e.props;if(!(s.x in a)||!(s.y in a)||!(s.z in a))return console.error("real time animation vector3To: object can not support props:",a,s),()=>{};if(!(s.x in o)||!(s.y in o)||!(s.z in o))return console.error("real time animation vector3To: config can not support props:",o,s),()=>{};const l={x:(d=e.to.x)!=null?d:a[s.x],y:(m=e.to.y)!=null?m:a[s.y],z:(_=e.to.z)!=null?_:a[s.z]};let u=!1;return()=>{if(u)return;u=!0;const y=new f(e.compiling?o:a).to(l).duration(e.duration).delay(e.delay).easing(p[e.timingFunction]).start(),S=T=>{y.update()};i.addEventListener("render",S),y.onComplete(()=>{i.removeEventListener("render",S),e.compiling||(o[s.x]=l.x,o[s.y]=l.y,o[s.z]=l.z),u=!1})}},Xt=Object.freeze(Object.defineProperty({__proto__:null,config:Jt,generator:Kt},Symbol.toStringTag,{value:"Module"})),te={addClass:k,changeCamera:H,changeScene:X,openWindow:V,switchAnimate:nt,visibleObject:ot,colorChange:ht,fadeObject:vt,focusObject:Ot,moveFromTo:Ct,moveSpacing:xt,moveTo:Mt,moveToObject:Rt,orbitTargetMove:Bt,rotationTo:Qt,showToCamera:kt,upTo:Ht,vector3To:Xt,setPosition:ct,setParent:dt,changeCursor:gt};export{te as q};
