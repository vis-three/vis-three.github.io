import{t as f}from"./index.7d48aff8.js";import{a as m,b as E,c as a}from"./index.f4f5b765.js";import{b as d}from"./index.ce95ade9.js";import{C as b,D as S}from"./vis-three.middleware.es.2e80d21b.js";import{a as p}from"./index.62992928.js";const x="@vis-three/strategy-trans-select-event-support",i=f(x),M=function(){let l,s,c;return{name:i,condition:[m,p,d,E,b,S],exec(t){const n=()=>{const o=[];t.selectionBox.forEach(r=>{const e=t.compilerManager.getObjectSymbol(r);e?o.push(e):console.warn(`${i} can not font vid in compilerManager.`,r)}),t.dispatchEvent({type:a,objects:Array.from(t.selectionBox),objectSymbols:o})};l=t.setSelectionBox,t.setSelectionBox=function(o){this.selectionBox.clear();for(const r of o)this.selectionBox.add(r);return n(),this},t.eventManager.addFilterObject(t.transformControls),s=o=>{if(t.transing){t.transing=!1;return}const r=o.intersections;if(o.ctrlKey||t.selectionBox.clear(),t.eventManager.penetrate)for(const e of r){if(o.ctrlKey&&t.selectionBox.has(e.object)){t.selectionBox.delete(e.object);continue}t.selectionBox.add(e.object)}else if(r.length){const e=r[0].object;if(o.ctrlKey&&t.selectionBox.has(e)){t.selectionBox.delete(e);return}t.selectionBox.add(e)}n()},t.eventManager.addEventListener("click",s),c=o=>{t.transformControls.setAttach(...o.objects)},t.addEventListener(a,c)},rollback(t){t.setSelectionBox=l,t.eventManager.removeFilterObject(t.transformControls),t.eventManager.removeEventListener("click",s),t.eventManager.removeEventListener(a,c)}}};export{M as T};
