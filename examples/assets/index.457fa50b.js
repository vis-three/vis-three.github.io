import{t as f}from"./curve.0ba3d968.js";import{a as m,b as a}from"./index.ca8957d4.js";import{b}from"./index.b5597af3.js";import{b as E}from"./vis-three.plugin-transform-controls.es.5244fee5.js";import{C as d,D as p}from"./vis-three.tdcm.es.ba892fff.js";import{a as x}from"./index.98a0d82e.js";const v="@vis-three/strategy-trans-select-event-support",i=f(v),M=function(){let l,s,c;return{name:i,condition:[m,x,b,E,d,p],exec(t){const n=()=>{const o=[];t.selectionBox.forEach(r=>{const e=t.compilerManager.getObjectSymbol(r);e?o.push(e):console.warn(`${i} can not font vid in compilerManager.`,r)}),t.dispatchEvent({type:a,objects:Array.from(t.selectionBox),objectSymbols:o})};l=t.setSelectionBox,t.setSelectionBox=function(o){this.selectionBox.clear();for(const r of o)this.selectionBox.add(r);return n(),this},t.eventManager.addFilterObject(t.transformControls),s=o=>{if(t.selectionDisable)return;if(t.transing){t.transing=!1;return}const r=o.intersections;if(o.ctrlKey||t.selectionBox.clear(),t.eventManager.penetrate)for(const e of r){if(o.ctrlKey&&t.selectionBox.has(e.object)){t.selectionBox.delete(e.object);continue}t.selectionBox.add(e.object)}else if(r.length){const e=r[0].object;if(o.ctrlKey&&t.selectionBox.has(e)){t.selectionBox.delete(e);return}t.selectionBox.add(e)}n()},t.eventManager.addEventListener("click",s),c=o=>{t.transformControls.setAttach(...o.objects)},t.addEventListener(a,c)},rollback(t){t.setSelectionBox=l,t.eventManager.removeFilterObject(t.transformControls),t.eventManager.removeEventListener("click",s),t.eventManager.removeEventListener(a,c)}}};export{M as T};
