import{d as m,u as p,C as c,D as f,M as T,a as S}from"./vis-three.middleware.es.2585b78e.js";import{b as u,d as O}from"./index.1d1f4865.js";import{t as C}from"./index.5fd0e639.js";const R="@vis-three/strategy-transform-controls-support",i="TransformControls",A=function(){return{vid:p(i),type:"",axis:"XYZ",enabled:!0,mode:"translate",snapAllow:!1,rotationSnap:Math.PI/180*10,translationSnap:5,scaleSnap:.1,showX:!0,showY:!0,showZ:!0,size:1,space:"world"}};var N=m({type:i,config:A,commands:{set:{snapAllow({target:a,config:n,value:o}){o?(a.translationSnap=n.translationSnap,a.rotationSnap=n.rotationSnap,a.scaleSnap=n.scaleSnap):(a.translationSnap=null,a.rotationSnap=null,a.scaleSnap=null)},translationSnap({target:a,config:n,value:o}){n.snapAllow&&(a.translationSnap=o)},rotationSnap({target:a,config:n,value:o}){n.snapAllow&&(a.rotationSnap=o)},scaleSnap({target:a,config:n,value:o}){n.snapAllow&&(a.scaleSnap=o)}}},create(a,n){let o=n.transformControls;return a.snapAllow&&(o.translationSnap=a.translationSnap,o.rotationSnap=a.rotationSnap,o.scaleSnap=a.scaleSnap),o},dispose(a){a.dispose()}});const d=C(R),w=function(){return{name:d,condition:[c,f,u],exec(a){a.compilerManager.getCompiler(T.CONTROLS).reigstProcessor(N,s=>{s.map.set(p(S.TRNASFORMCONTROLS),a.transformControls),s.weakMap.set(a.transformControls,p(S.ORBITCONTROLS))});const o=s=>{const l=a.compilerManager.getObjectSymbol(s);return l?a.dataSupportManager.getConfigBySymbol(l):null};let r=null,t;a.transformControls.addEventListener(O.CHANGED,s=>{const l=s;l.transObjectSet.forEach(e=>{r=o(e),t=l.mode,r&&(r[t].x=e[t].x,r[t].y=e[t].y,r[t].z=e[t].z)})})},rollback(){}}};export{w as T};
