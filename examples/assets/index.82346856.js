import{b as d,c as E,e as m,f as l,h as R,u as n,i as f,d as b,C as h,D as C,M as w,g as y,a as P}from"./vis-three.tdcm.es.ba892fff.js";import{s as g,t as L}from"./curve.0ba3d968.js";import{a as S}from"./index.c0df7946.js";import{Y as x,Z as M,_}from"./three.3f33d046.js";const a=function(e,r=!1){if(e.startsWith("rgba")){const[s,o,t,i]=e.slice(5,-1).split(",").map(u=>Number(u));return r?{r:s/255,g:o/255,b:t/255,a:i}:{r:s,g:o,b:t,a:i}}if(e.startsWith("rgb")){const[s,o,t]=e.slice(4,-1).split(",").map(i=>Number(i));return r?{r:s/255,g:o/255,b:t/255,a:null}:{r:s,g:o,b:t,a:null}}return console.warn(`color str is illegal: ${e}`),{r:0,g:0,b:0,a:null}},c=[],G=E([function(e){return m.symbol.validator(e.symbol)||c.includes(e.symbol)},l.OPERATE_ADD,l.OPERATE_DELETE,l.OPERATE_COVER,l.OPERATE_COMPILE]);class T extends R{constructor(r){super(r)}useModel(r,s){return c.push(n(r.type)),super.useModel(r,s)}}const O=function(){return Object.assign(f(),{size:null})},$=d({type:"renderer",compiler:T,rule:G,models:[]}),v="@vis-three/strategy-webgl-renderer-support",p=function(){return Object.assign(O(),{vid:n("WebGLRenderer"),clearColor:"rgba(0, 0, 0, 0)",outputEncoding:0,outputColorSpace:x,physicallyCorrectLights:!1,shadowMap:{enabled:!1,autoUpdate:!0,needsUpdate:!1,type:M},toneMapping:_,toneMappingExposure:1,pixelRatio:window.devicePixelRatio,adaptiveCamera:!1,viewport:null,scissor:null})};var N=b({type:"WebGLRenderer",config:p,commands:{set:{size({target:e,config:r}){r.size?e.setSize(r.size.x,r.size.y):e.setSize(e.domElement.offsetWidth,e.domElement.offsetHeight)},clearColor({target:e,value:r}){const s=a(r);e.setClearColor(`rgb(${s.r}, ${s.g}, ${s.b})`,s.a),e.clear()},viewport({target:e,config:r}){const s=r.viewport;if(s)e.setViewport(s.x,s.y,s.width,s.height);else{const o=e.domElement;e.setViewport(0,0,o.offsetWidth,o.offsetHeight)}},scissor({target:e,config:r}){const s=r.scissor;if(s)e.setScissorTest(!0),e.setScissor(s.x,s.y,s.width,s.height);else{e.setScissorTest(!1);const o=e.domElement;e.setScissor(0,0,o.offsetWidth,o.offsetHeight)}},pixelRatio({target:e,value:r}){e.setPixelRatio(r),e.clear()}}},create({config:e,engine:r}){let s=r.webGLRenderer;if(e.size&&s.setSize(e.size.x,e.size.y),e.clearColor){const o=a(e.clearColor);s.setClearColor(`rgb(${o.r}, ${o.g}, ${o.b})`,o.a)}if(e.viewport){const o=e.viewport;s.setViewport(o.x,o.y,o.width,o.height)}if(e.scissor){const o=e.scissor;s.setScissorTest(!0),s.setScissor(o.x,o.y,o.width,o.height)}return e.pixelRatio&&s.setPixelRatio(e.pixelRatio),g(e,s,{size:!0,clearColor:!0,viewport:!0,scissor:!0,pixelRatio:!0}),s},dispose({target:e}){e.clear(),e.dispose()}});const W=L(v),I=function(){return{name:W,condition:[h,C,S],exec(e){e.compilerManager.getCompiler(w.RENDERER).useModel(N,s=>{const o=y(P.WEBGLRENDERER,p());e.applyConfig(o)})},rollback(){}}};export{I as W,O as a,$ as p};
