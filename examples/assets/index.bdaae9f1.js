import{d as m,u as p,C as c,D as f,M as T,a as S}from"./vis-three.middleware.es.7f273029.js";import{a as C,b as O}from"./index.12fd638d.js";import{t as u}from"./index.202ebdec.js";import{g as R}from"./vis-three.module-particle.es.8e43cbb8.js";const A="@vis-three/strategy-transform-controls-support",i="TransformControls",N=function(){return Object.assign(R(),{vid:p(i),axis:"XYZ",enabled:!0,mode:"translate",snapAllow:!1,rotationSnap:Math.PI/180*10,translationSnap:5,scaleSnap:.1,showX:!0,showY:!0,showZ:!0,size:1,space:"world"})};var d=m({type:i,config:N,commands:{set:{snapAllow({target:o,config:n,value:a}){a?(o.translationSnap=n.translationSnap,o.rotationSnap=n.rotationSnap,o.scaleSnap=n.scaleSnap):(o.translationSnap=null,o.rotationSnap=null,o.scaleSnap=null)},translationSnap({target:o,config:n,value:a}){n.snapAllow&&(o.translationSnap=a)},rotationSnap({target:o,config:n,value:a}){n.snapAllow&&(o.rotationSnap=a)},scaleSnap({target:o,config:n,value:a}){n.snapAllow&&(o.scaleSnap=a)}}},create(o,n){let a=n.transformControls;return o.snapAllow&&(a.translationSnap=o.translationSnap,a.rotationSnap=o.rotationSnap,a.scaleSnap=o.scaleSnap),a},dispose(o){o.dispose()}});const P=u(A),_=function(){return{name:P,condition:[c,f,C],exec(o){o.compilerManager.getCompiler(T.CONTROLS).reigstProcessor(d,s=>{s.map.set(p(S.TRNASFORMCONTROLS),o.transformControls),s.weakMap.set(o.transformControls,p(S.ORBITCONTROLS))});const a=s=>{const l=o.compilerManager.getObjectSymbol(s);return l?o.dataSupportManager.getConfigBySymbol(l):null};let r=null,t;o.transformControls.addEventListener(O.CHANGED,s=>{const l=s;l.transObjectSet.forEach(e=>{r=a(e),t=l.mode,r&&(r[t].x=e[t].x,r[t].y=e[t].y,r[t].z=e[t].z)})})},rollback(){}}};export{_ as T};
