import{t as g,b as m}from"./curve.0ba3d968.js";import{l as E,X as w}from"./three.3f33d046.js";import{b as k}from"./index.b5597af3.js";import{N as B,d as u,f as C}from"./vis-three.plugin-object-helper.es.59a74f53.js";import{a as _,b as S}from"./index.ca8957d4.js";const A="@vis-three/strategy-helper-select-interact",I=g(A),U=function(o={}){const a=new Map,d=new Map,f=new Map,v=new Set;let l,i,L,b;return{name:I,condition:[k,B,_],exec(t){o.interact===void 0&&(o.interact=!0);const H=t.objectHelperManager,h=t.objectHelperManager.objectHelperMap;!o.activeColor&&(o.activeColor="rgb(230, 20, 240)"),!o.hoverColor&&(o.hoverColor="rgb(255, 158, 240)"),!o.defaultColor&&(o.defaultColor="rgb(255, 255, 255)"),!o.selectedColor&&(o.selectedColor=o.activeColor);const p=new E(o.defaultColor).getHex(),F=new E(o.activeColor).getHex(),N=new E(o.hoverColor).getHex(),T=new E(o.selectedColor).getHex(),c=(n,r)=>{n.material.color?n.material.color.setHex(r):n.material instanceof w&&n.material.uniforms.color.value.setHex(r)};l=n=>{const r=n.objects;for(const e of r){const s=H.addObjectHelper(e);if(!!s&&(c(s,p),o.interact)){const x=()=>{t.transformControls.dragging||t.selectionBox&&t.selectionBox.has(e)||c(s,N)},j=()=>{t.transformControls.dragging||t.selectionBox&&t.selectionBox.has(e)||c(s,p)},M=()=>{t.transformControls.dragging||t.selectionBox&&t.selectionBox.has(e)||c(s,F)};e.addEventListener("pointerenter",x),e.addEventListener("pointerleave",j),e.addEventListener("click",M),a.set(e,x),d.set(e,j),f.set(e,M)}}},i=n=>{const r=n.objects;for(const e of r)!H.disposeObjectHelper(e)||o.interact&&(e.removeEventListener("pointerenter",a.get(e)),e.removeEventListener("pointerleave",d.get(e)),e.removeEventListener("click",f.get(e)),a.delete(e),d.delete(e),f.delete(e))},t.scene.addEventListener(u,l),t.scene.addEventListener(C,i),L=n=>{const r=n.scene;r.hasEventListener(u,l)||r.addEventListener(u,l),r.hasEventListener(C,i)||r.addEventListener(C,i)},t.addEventListener(m.SETSCENE,L),b=n=>{v.forEach(r=>{c(r,p)}),v.clear();for(const r of n.objects)if(h.has(r)){const e=h.get(r);c(e,T),v.add(e)}},t.addEventListener(S,b)},rollback(t){t.scene.removeEventListener(u,l),t.scene.removeEventListener(C,i),t.removeEventListener(S,b),t.removeEventListener(m.SETSCENE,L),a.clear(),d.clear(),f.clear(),v.clear()}}};export{U as H};
