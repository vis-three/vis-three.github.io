import{P as x,M as d,B as b,a as y,A as l,bM as S,W as p,c7 as m,S as u,f as w,w as g,G as L,L as M,b as P,bt as R}from"./three.3f33d046.js";class C{constructor(e){this.canvas=document.createElement("canvas");const t=window.devicePixelRatio;this.canvas.width=((e==null?void 0:e.width)||512)*t,this.canvas.height=((e==null?void 0:e.height)||512)*t,this.canvas.style.backgroundColor=(e==null?void 0:e.bgColor)||"rgb(255, 255, 255)";const i=this.canvas.getContext("2d");i&&i.scale(window.devicePixelRatio,window.devicePixelRatio)}get(){return this.canvas}getDom(){return this.canvas}clear(e=0,t=0,i,s){!i&&(i=this.canvas.width),!s&&(s=this.canvas.height);const c=this.canvas.getContext("2d");return c?(c.clearRect(e,t,i,s),this):(console.warn("you browser can not support canvas 2d"),this)}draw(e){const t=this.canvas.getContext("2d");return t?(e(t),this):(console.warn("you browser can not support canvas 2d"),this)}preview(e){const t=this.canvas;return t.style.position="fixed",t.style.top=(e==null?void 0:e.top)||"5%",t.style.left=(e==null?void 0:e.left)||"5%",t.style.right=(e==null?void 0:e.right)||"unset",t.style.bottom=(e==null?void 0:e.bottom)||"unset",e!=null&&e.scale&&(t.style.transform=`scale(${e.scale})`),document.body.appendChild(this.canvas),this}setSize(e,t){return this.canvas.width=e*devicePixelRatio,this.canvas.height=t*devicePixelRatio,this}}class z{next(){console.warn(`this action can not set next function: ${this.constructor.name}`)}prev(){console.warn(`this action can not set prev function: ${this.constructor.name}`)}}class D{constructor(e){this.actionList=[],this.index=-1,this.step=50,this.step=e||50}do(e){this.actionList[this.index][e]()}apply(e,t=!1){const i=this.actionList;this.index===i.length-1&&i.length>=this.step?(i.shift(),this.index=this.actionList.length-1):this.index!==-1?i.splice(this.index+1,i.length-1):this.index===-1&&(this.actionList=[]),this.actionList.push(e),t?this.redo():this.index+=1}redo(){if(this.index+=1,this.index>this.actionList.length-1){this.index=this.actionList.length-1;return}this.do("next")}undo(){this.index<0||(this.do("prev"),this.index-=1)}clear(){this.actionList=[]}}const r=new x("rgb(255, 255, 255)",.5,200,1);r.position.set(-30,5,20);r.castShadow=!0;const o=new d(new b(80,2,80),new y({color:"rgb(255, 255, 255)"}));o.position.set(0,-11,0);o.receiveShadow=!0;o.castShadow=!0;const n=class a{constructor(e){const t=new p({antialias:!0,preserveDrawingBuffer:!0});t.setPixelRatio(window.devicePixelRatio),t.setClearColor("rgb(150, 150, 150)"),t.shadowMap.enabled=!0,t.shadowMap.type=m;const i=new u,s=new w(45,window.innerWidth/window.innerHeight,1,500);s.position.set(0,0,35),s.up.x=0,s.up.y=1,s.up.z=0,s.lookAt(new g(0,0,0)),i.add(a.ambientLight),i.add(a.pointLight),i.add(a.plane),this.scene=i,this.renderer=t,this.camera=s,this.object=new L,e!=null&&e.material&&this.setMaterial(e.material),e!=null&&e.dom&&this.setDom(e.dom)}setMaterial(e){if(this.scene.remove(this.object),this.material=e,e.type.includes("Mesh")||e.type==="ShaderMaterial"||e.type==="RawShaderMaterial")this.object=new d(a.geometry,e);else if(e.type.includes("Line"))this.object=new M(a.geometry,e);else if(e.type.includes("Points"))this.object=new P(a.geometry,e);else if(e.type.includes("Sprite"))this.object=new R(e);else return console.warn(`material displayer can not support this type material: '${e.type}'`),this;return this.object.castShadow=!0,this.object.receiveShadow=!0,this.scene.add(this.object),this}setDom(e){return this.dom=e,this.setSize(),e.appendChild(this.renderer.domElement),this}setSize(e,t){if(e&&t)this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t,!0);else{if(!this.dom)return console.warn("material displayer must set dom before setSize with empty parameters"),this;const i=this.dom;this.camera.aspect=i.offsetWidth/i.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(i.offsetWidth,i.offsetHeight,!0)}return this}render(){this.renderer.render(this.scene,this.camera)}getDataURL(e){return this.renderer.domElement.toDataURL(e||"image/png")}dispose(){this.renderer.dispose()}};n.ambientLight=new l("rgb(255, 255, 255)",.7),n.pointLight=r,n.geometry=new S(10,12,12),n.plane=o,n.dispose=()=>{n.geometry.dispose(),n.plane.geometry.dispose()};let W=n;const f=class v{constructor(e){const t=new p({antialias:!0,preserveDrawingBuffer:!0});t.setPixelRatio(window.devicePixelRatio),t.setClearColor("rgb(150, 150, 150)"),t.shadowMap.enabled=!0,t.shadowMap.type=m;const i=new u,s=new w(45,window.innerWidth/window.innerHeight,1,500);s.position.set(0,0,35),s.up.x=0,s.up.y=1,s.up.z=0,s.lookAt(new g(0,0,0)),i.add(v.ambientLight),this.scene=i,this.renderer=t,this.camera=s,e!=null&&e.texture&&this.setTexture(e.texture),e!=null&&e.dom&&this.setDom(e.dom)}setTexture(e){return this.scene.background=e,this}setDom(e){return this.dom=e,this.setSize(),e.appendChild(this.renderer.domElement),this}setSize(e,t){if(e&&t)this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t,!0);else{if(!this.dom)return console.warn("texture displayer must set dom before setSize with empty parameters"),this;const i=this.dom;this.camera.aspect=i.offsetWidth/i.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(i.offsetWidth,i.offsetHeight,!0)}return this}render(){this.renderer.render(this.scene,this.camera)}getDataURL(e){return this.renderer.domElement.toDataURL(e||"image/png")}dispose(){this.renderer.dispose()}};f.ambientLight=new l("rgb(255, 255, 255)",1);let H=f;export{D as A,C as H,z as W,W as a,H as f};
