import{b as B,E as Ge,s as Be,a as Ie,i as b,c as E,e as re}from"./index.7d48aff8.js";import{L as Ve,a as xe,b as F}from"./vis-three.plugin-loader-manager.es.7fbd57ff.js";import{P as He}from"./vis-three.plugin-pointer-manager.es.86f17451.js";import{E as We}from"./index.ce95ade9.js";import{R as Fe}from"./index.9c42f01c.js";import{_ as z,a as J,b as _,c as I}from"./G6.7a2bba98.js";var R,qe=new Uint8Array(16);function Xe(){if(!R&&(R=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!R))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R(qe)}var Ze=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ne(r){return typeof r=="string"&&Ze.test(r)}var p=[];for(var q=0;q<256;++q)p.push((q+256).toString(16).substr(1));function ze(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(p[r[e+0]]+p[r[e+1]]+p[r[e+2]]+p[r[e+3]]+"-"+p[r[e+4]]+p[r[e+5]]+"-"+p[r[e+6]]+p[r[e+7]]+"-"+p[r[e+8]]+p[r[e+9]]+"-"+p[r[e+10]]+p[r[e+11]]+p[r[e+12]]+p[r[e+13]]+p[r[e+14]]+p[r[e+15]]).toLowerCase();if(!ne(t))throw TypeError("Stringified UUID is invalid");return t}function Ee(r,e,t){r=r||{};var n=r.random||(r.rng||Xe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=n[s];return e}return ze(n)}function v(r){return typeof r=="function"}function Ce(r){var e=function(n){Error.call(n),n.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var X=Ce(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,s){return s+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function K(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}var V=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,n,s,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=z(i),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else i.remove(this);var f=this.initialTeardown;if(v(f))try{f()}catch(d){o=d instanceof X?d.errors:[d]}var C=this._finalizers;if(C){this._finalizers=null;try{for(var w=z(C),M=w.next();!M.done;M=w.next()){var ke=M.value;try{ye(ke)}catch(d){o=o!=null?o:[],d instanceof X?o=J(J([],_(o)),_(d.errors)):o.push(d)}}}catch(d){n={error:d}}finally{try{M&&!M.done&&(s=w.return)&&s.call(w)}finally{if(n)throw n.error}}}if(o)throw new X(o)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)ye(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&K(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&K(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}(),Ae=V.EMPTY;function De(r){return r instanceof V||r&&"closed"in r&&v(r.remove)&&v(r.add)&&v(r.unsubscribe)}function ye(r){v(r)?r():r.unsubscribe()}var se={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Q={setTimeout:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var s=Q.delegate;return s!=null&&s.setTimeout?s.setTimeout.apply(s,J([r,e],_(t))):setTimeout.apply(void 0,J([r,e],_(t)))},clearTimeout:function(r){var e=Q.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(r)},delegate:void 0};function Ke(r){Q.setTimeout(function(){throw r})}function ge(){}var L=null;function P(r){if(se.useDeprecatedSynchronousErrorHandling){var e=!L;if(e&&(L={errorThrown:!1,error:null}),r(),e){var t=L,n=t.errorThrown,s=t.error;if(L=null,n)throw s}}else r()}var je=function(r){I(e,r);function e(t){var n=r.call(this)||this;return n.isStopped=!1,t?(n.destination=t,De(t)&&t.add(n)):n.destination=tt,n}return e.create=function(t,n,s){return new Y(t,n,s)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(V),Qe=Function.prototype.bind;function Z(r,e){return Qe.call(r,e)}var Ye=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){N(n)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){N(n)}else N(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){N(t)}},r}(),Y=function(r){I(e,r);function e(t,n,s){var o=r.call(this)||this,i;if(v(t)||!t)i={next:t!=null?t:void 0,error:n!=null?n:void 0,complete:s!=null?s:void 0};else{var a;o&&se.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=function(){return o.unsubscribe()},i={next:t.next&&Z(t.next,a),error:t.error&&Z(t.error,a),complete:t.complete&&Z(t.complete,a)}):i=t}return o.destination=new Ye(i),o}return e}(je);function N(r){Ke(r)}function et(r){throw r}var tt={closed:!0,next:ge,error:et,complete:ge},rt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function nt(r){return r}function st(r){return r.length===0?nt:r.length===1?r[0]:function(t){return r.reduce(function(n,s){return s(n)},t)}}var me=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var s=this,o=it(e)?e:new Y(e,t,n);return P(function(){var i=s,a=i.operator,c=i.source;o.add(a?a.call(o,c):c?s._subscribe(o):s._trySubscribe(o))}),o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var n=this;return t=be(t),new t(function(s,o){var i=new Y({next:function(a){try{e(a)}catch(c){o(c),i.unsubscribe()}},error:o,complete:s});n.subscribe(i)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[rt]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return st(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=be(e),new e(function(n,s){var o;t.subscribe(function(i){return o=i},function(i){return s(i)},function(){return n(o)})})},r.create=function(e){return new r(e)},r}();function be(r){var e;return(e=r!=null?r:se.Promise)!==null&&e!==void 0?e:Promise}function ot(r){return r&&v(r.next)&&v(r.error)&&v(r.complete)}function it(r){return r&&r instanceof je||ot(r)&&De(r)}var at=Ce(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),oe=function(r){I(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var n=new ve(this,this);return n.operator=t,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new at},e.prototype.next=function(t){var n=this;P(function(){var s,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var i=z(n.currentObservers),a=i.next();!a.done;a=i.next()){var c=a.value;c.next(t)}}catch(l){s={error:l}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(s)throw s.error}}}})},e.prototype.error=function(t){var n=this;P(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var s=n.observers;s.length;)s.shift().error(t)}})},e.prototype.complete=function(){var t=this;P(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var n=this,s=this,o=s.hasError,i=s.isStopped,a=s.observers;return o||i?Ae:(this.currentObservers=null,a.push(t),new V(function(){n.currentObservers=null,K(a,t)}))},e.prototype._checkFinalizedStatuses=function(t){var n=this,s=n.hasError,o=n.thrownError,i=n.isStopped;s?t.error(o):i&&t.complete()},e.prototype.asObservable=function(){var t=new me;return t.source=this,t},e.create=function(t,n){return new ve(t,n)},e}(me),ve=function(r){I(e,r);function e(t,n){var s=r.call(this)||this;return s.destination=t,s.source=n,s}return e.prototype.next=function(t){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.next)===null||s===void 0||s.call(n,t)},e.prototype.error=function(t){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.error)===null||s===void 0||s.call(n,t)},e.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},e.prototype._subscribe=function(t){var n,s;return(s=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&s!==void 0?s:Ae},e}(oe),ct=Object.defineProperty,ut=(r,e,t)=>e in r?ct(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,u=(r,e,t)=>(ut(r,typeof e!="symbol"?e+"":e,t),t);const O={},Me={},ie={},H={},$e={},ee={},ae=r=>$e[r]||null,lt=r=>H[r],pt=r=>{const e=ae(r);return e?lt(e):!1},Re=function(r,e){ee[r.type]=r,ie[r.type.toLocaleUpperCase()]=r.type,O[r.type]=r.config,$e[r.type]=e},h={proxy:{expand:void 0,timing:"before",toRaw:void 0},symbol:{generator:Ee,validator:ne}},tr=function(r){r.proxy&&Object.assign(h.proxy,r.proxy),r.symbol&&Object.assign(h.symbol,r.symbol)},D=(r,e)=>e===1/0?"Infinity":e===-1/0?"-Infinity":e,Le=(r,e)=>e==="Infinity"?1/0:e==="-Infinity"?-1/0:e,T=r=>JSON.parse(JSON.stringify(r,D),Le);class ft{constructor(e){u(this,"config"),this.config=e}pipe(e){return this.config=e(this.config),this}get(){return this.config}}var j={stringify:D,parse:Le,clone:T,Pipeline:ft};const y=function(r,e,t={observer:!0,strict:!0,warn:!0}){if(t.observer===void 0&&(t.observer=!0),t.strict===void 0&&(t.strict=!0),t.warn===void 0&&(t.warn=!0),t.handler===void 0&&(t.handler=h.proxy.expand),!O[r])return console.error(`type: ${r} can not be found in configList.`),{vid:"",type:r};const n=(i,a)=>{for(const c in a){if(i[c]===void 0){!t.strict&&(i[c]=a[c]),t.strict&&t.warn&&console.warn(`'${r}' config can not set key: ${c}`);continue}typeof a[c]=="object"&&a[c]!==null&&!Array.isArray(a[c])?(i[c]===null&&(i[c]={...a[c]}),n(i[c],a[c])):i[c]=a[c]}};let s=O[r]();if(s.vid===""&&(s.vid=h.symbol.generator()),e&&n(s,e),t.observer===!1)return s;t.handler&&h.proxy.timing==="before"&&(s=t.handler(s));let o=Dt(s);if(t.handler&&h.proxy.timing==="after"&&(o=t.handler(o)),y.autoInject&&y.injectEngine){const i=y.injectEngine;if(i.applyConfig(o),y.injectScene&&pt(s.type)&&s.type!==ie.SCENE){let a=null;typeof y.injectScene=="boolean"?a=i.getObjectConfig(i.scene):typeof y.injectScene=="string"&&(a=i.getConfigBySymbol(y.injectScene)),a?a.children.push(s.vid):console.warn("current engine scene can not found it config",i,i.scene)}return o}return o};y.autoInject=!0;y.injectScene=!1;y.injectEngine=null;const Ne=(r,e={})=>{let t=JSON.stringify(r,j.stringify);const n={},s=Object.keys(r).filter(i=>i!=="assets");for(const i of s)for(const a of r[i]){const c=a.vid,l=Ee();t=t.replace(new RegExp(c,"g"),l),e.detail&&(n[c]=l)}const o=JSON.parse(t,j.parse);if(e.fillName)if(typeof e.fillName=="function")for(const i of s)for(const a of o[i])a.name||(a.name=e.fillName(a));else for(const i of s)for(const a of o[i])a.name||(a.name=`${a.type}-${a.vid.slice(-2)}`);return e.detail?{config:o,detail:n}:o},ce=(r,e,t={clone:!0,assets:!1})=>{const n=t.clone?j.clone(r):r,s=t.assets?Object.keys(n):Object.keys(n).filter(o=>o!=="assets");for(const o of s)n[o].forEach((a,c,l)=>{l[c]=e(a)});return n},Pe=function(r){const e={};for(const t of Object.keys(r))for(const n of r[t])e[n.name]=n;return e},Te=function(r,e){return typeof r=="string"&&(r=JSON.parse(r,j.parse)),ce(j.clone(r),t=>(t=y(t.type,t,{strict:!1}),e?e(t):t))};var ht={clone:Ne,handler:ce,planish:Pe,observable:Te},rr=Object.freeze(Object.defineProperty({__proto__:null,clone:Ne,handler:ce,planish:Pe,observable:Te,default:ht},Symbol.toStringTag,{value:"Module"}));class dt{constructor(){u(this,"list",[]),u(this,"timer"),u(this,"time",0)}exec(e){if(e(!1))return;this.list.includes(e)||this.list.push(e);let t=0;const n=()=>{this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{const s=[];for(const o of this.list)o(!1)||s.push(o);if(s.length)if(s.length===t){for(const o of s)o(!0);this.list=[]}else t=s.length,this.list=s,n();else this.list=[]},this.time)};n()}append(e){this.list.length&&!this.list.includes(e)?this.list.push(e):this.exec(e)}nextTick(e){setTimeout(()=>{e()},this.time)}}const nr=new dt;class ue{constructor(){u(this,"map",new WeakMap)}create(e){if(this.map.has(e)){console.warn("object is exist.",e);return}this.map.set(e,new B)}dispose(e){this.map.delete(e)}check(e){return this.map.has(e)}emit(e,t,n){if(!this.map.has(e)){console.warn("object can not create eventDispatcher please create it",e);return}this.map.get(e).emit(t,n)}on(e,t,n){if(!this.map.has(e)){console.warn("object can not create eventDispatcher please create it",e);return}this.map.get(e).on(t,n)}off(e,t,n){if(!this.map.has(e)){console.warn("object can not create eventDispatcher please create it",e);return}this.map.get(e).off(t,n)}}const x=new ue,yt=new ue;var sr=Object.freeze(Object.defineProperty({__proto__:null,Bus:ue,compilerEvent:x,configEvent:yt},Symbol.toStringTag,{value:"Module"}));class gt{constructor(){u(this,"condition",{})}registerModule(e){return this.condition[e]=!1,this}updateCondition(e){return typeof this.condition[e]!="undefined"&&(this.condition[e]=!0),this}reset(){Object.keys(this.condition).forEach(e=>{this.condition[e]=!1})}test(){return!Object.values(this.condition).includes(!1)}trig(){}}class mt extends gt{constructor(){super(),u(this,"triggerList",[])}registerModule(e){return H[e]?super.registerModule(e):this}registerExec(e){e(!0)||this.triggerList.push(e)}trig(){const e=this.triggerList;for(const t of e)t();this.reset()}reset(){this.triggerList=[],super.reset()}}const bt=new mt,or=function(){return h.symbol.generator()};var vt=(r=>(r.ADD="compiler.add",r.REMOVE="compiler.remove",r.COMPILE="compiler.compile",r.UPDATE="compiler.update",r))(vt||{});class ir{constructor(){u(this,"MODULE",""),u(this,"processors",new Map),u(this,"target",{}),u(this,"map",new Map),u(this,"weakMap",new WeakMap),u(this,"engine"),u(this,"cacheCompile")}getMap(){return this.map}useEngine(e){return this.engine=e,this}setTarget(e){return this.target=e,this}add(e){if(!this.processors.has(e.type))return console.warn(`${this.MODULE} compiler can not support this type: ${e.type}`),null;const n=this.processors.get(e.type).create(e,this.engine,this);return this.map.set(e.vid,n),this.weakMap.set(n,e.vid),x.create(n),x.emit(n,"compiler.add"),n}remove(e){const t=e.vid;if(!this.map.has(t))return console.warn(`${this.MODULE} compiler can not found this vid object: ${t}.`),this;if(!this.processors.has(e.type))return console.warn(`${this.MODULE} compiler can not support this type: ${e.type}`),this;const n=this.map.get(t);return this.processors.get(e.type).dispose(n,this.engine,this),this.map.delete(t),this.weakMap.delete(n),x.emit(n,"compiler.remove"),x.dispose(n),this.cacheCompile&&this.cacheCompile.vid===t&&(this.cacheCompile=void 0),this}cover(e){const t=e.vid;return this.map.has(t)?(Promise.resolve().then(()=>{Be(e,e,{vid:!0,type:!0})}),this):(console.warn(`${this.MODULE} compiler can not found this vid object: ${t}.`),this)}compile(e,t){const n=this.cacheCompile;let s,o,i;if(n&&n.vid===e)s=n.target,o=n.config,i=n.processor;else{if(!this.map.has(e))return console.warn(`${this.MODULE} compiler set function: can not found object which vid is: '${e}'`),this;if(!this.target[e])return console.warn(`${this.MODULE} compiler set function: can not found config which vid is: '${e}'`),this;if(s=this.map.get(e),o=this.target[e],!this.processors.has(o.type))return console.warn(`PassCompiler can not support this type: ${o.type}`),this;i=this.processors.get(o.type),this.cacheCompile={target:s,config:o,processor:i,vid:e}}return i.process({config:o,target:s,engine:this.engine,processor:i,compiler:this,...t}),x.emit(s,`compiler.compile:${t.path.join(".")}.${t.key}`),x.emit(s,"compiler.update"),this}compileAll(){const e=this.target;for(const t of Object.values(e))this.add(t);return this}dispose(){this.cacheCompile&&(this.cacheCompile=void 0);for(const e of Object.values(this.target)){if(!this.map.has(e.vid)){console.warn(`${this.MODULE} compiler set function: can not found object which vid is: '${e.vid}'`);continue}const t=this.map.get(e.vid);if(!this.processors.has(e.type)){console.warn(`${this.MODULE}  can not support this type: ${e.type}`);continue}this.processors.get(e.type).dispose(t,this.engine,this)}return this.map.clear(),this.target={},this}reigstProcessor(e,t){return this.processors.has(e.type)?(console.warn(`${this.MODULE} compiler has already exist this processor ${e.type}, that will be cover.`),this):(this.processors.set(e.type,e),Re(e,this.MODULE),t(this),this)}getObjectSymbol(e){return this.weakMap.get(e)||null}getObjectBySymbol(e){return this.map.get(e)||null}}const Mt=function(r,e,t){return class extends e{constructor(){super(),u(this,"MODULE",r);for(const n of t)this.processors.set(n.type,n)}}},Ue=new WeakMap,U=function(r){Array.isArray(r)&&Ue.set(r,r.concat([]))},St=function(r){return Ue.get(r)},te="vis.father",$="vis.key",le=function(r){let e="";const t=n=>{n[Symbol.for($)]!==void 0&&(e=`${n[Symbol.for($)]}${e?`.${e}`:""}`,n[Symbol.for(te)]&&t(n[Symbol.for(te)]))};return t(r),e},Ot=function(r){if(r.length&&b(r[0])){const e=r.length;for(let t=0;t<e;t+=1)r[t][Symbol.for($)]=t}},k=new WeakMap,wt=["push","pop","shift","unshift","splice","sort","reverse"],A=new WeakSet,xt=function(r,e,t){return Array.isArray(r)&&wt.includes(e)&&A.add(r),Reflect.get(r,e,t)},Et=function(r,e,t,n,s){const o=le(r);if(typeof e=="symbol"||s.isIgnore(re(o,e)))return Reflect.set(r,e,t,n);if(b(t)&&!k.has(t)&&(t=G(s,t,r)),r[e]===void 0){b(t)&&(t[Symbol.for($)]=e,E(t)&&U(t)),E(r)&&A.delete(r);const a=Reflect.set(r,e,t);return E(r)&&U(r),s.next({operate:"add",path:o,key:e,value:t}),a}const i=Reflect.set(r,e,t);if(E(r)){if(A.has(r)&&e==="length"){const a=St(r);if(!a)return console.error("array value is not be cached:",r),i;Ot(r);const c=Math.abs(a.length-r.length),l=a.length>=r.length?"delete":"add",f=a.length>=r.length?r:a;let C=0,w=0;for(const M of l==="delete"?a:r){if(!f.includes(M)&&(s.next({operate:l,path:o,key:w.toString(),value:M}),C+=1,C===c))break;w+=1}return U(r),A.delete(r),i}else if(A.has(r)||e==="length")return i}return s.next({operate:"set",path:o,key:e,value:t}),i},Ct=function(r,e,t){const n=le(r);if(typeof e=="symbol"||t.isIgnore(n))return Reflect.deleteProperty(r,e);const s=r[e],o=Reflect.deleteProperty(r,e);return E(r)||t.next({operate:"delete",path:n,key:e,value:s}),o},G=function(r,e,t){if(!b(e)||k.has(e))return e;const n=t?le(t):"";if(r.isIgnore(n))return e;const s={get:xt,set:(i,a,c,l)=>Et(i,a,c,l,r),deleteProperty:(i,a)=>Ct(i,a,r)};t&&(e[Symbol.for(te)]=t);for(const i in e){const a=re(n,i);if(!r.isIgnore(a)&&b(e[i])){if(E(e[i])){const c=e[i];e[i]=G(r,e[i],e),U(c)}else e[i]=G(r,e[i],e);e[i][Symbol.for($)]=i}}const o=new Proxy(e,s);return r.saveRaw(o,e),k.set(o,r),o};class At extends oe{constructor(e,t){super(),u(this,"ignore",{}),u(this,"target"),u(this,"rawMap",new WeakMap),t&&(this.ignore=t),this.target=G(this,e)}isIgnore(e){let t=this.ignore;for(const n of e.split(".")){if(t[n]===void 0)return!1;if(typeof t[n]=="boolean"&&t[n])return!0;t=t[n]}return!1}setIgnore(e){this.ignore=e}mergeIgnore(e){this.ignore=Object.assign(this.ignore,e)}saveRaw(e,t){this.rawMap.set(e,t)}toRaw(e){return this.rawMap.get(e)}}const Dt=function(r,e){return new At(r,e).target},jt=function(r){return k.get(h.proxy.toRaw?h.proxy.toRaw(r):r)},Se=function(r,e,t){return Reflect.get(r,e,t)},Oe=function(r,e,t,n,s){if(typeof e=="symbol")return Reflect.set(r,e,t,n);if(r[e]===void 0){const o=Reflect.set(r,e,t);return s.add(t),s.next({operate:"add",path:e,key:e,value:t}),o}else{const o=Reflect.set(r,e,t);return s.remove(t.vid),s.add(t),s.next({operate:"set",path:e,key:e,value:t}),o}},we=function(r,e,t){if(typeof e=="symbol")return Reflect.deleteProperty(r,e);const n=r[e],s=Reflect.deleteProperty(r,e);return t.next({operate:"delete",path:e,key:e,value:n}),t.remove(n.vid),s};class $t extends oe{constructor(){super(),u(this,"container"),u(this,"subscriptions",new Map);const e=h.proxy.expand?(t={})=>h.proxy.expand(t):(t={})=>t;h.proxy.timing==="before"?this.container=new Proxy(e(),{get:Se,set:(t,n,s,o)=>Oe(t,n,s,o,this),deleteProperty:(t,n)=>we(t,n,this)}):this.container=e(new Proxy({},{get:Se,set:(t,n,s,o)=>Oe(t,n,s,o,this),deleteProperty:(t,n)=>we(t,n,this)}))}add(e){const t=jt(e);if(!t){console.error("DataContainer: this config can not observer",e);return}this.subscriptions.set(t.target.vid,t.subscribe(n=>{this.next({operate:n.operate,path:re(t.target.vid,n.path),key:n.key,value:n.value})}))}remove(e){this.subscriptions.delete(e)}}class Rt{constructor(){u(this,"rule",()=>{}),u(this,"members",[])}apply(e){return this.members.includes(e)||this.members.push(e),this}cancel(e){return this.members.includes(e)&&this.members.splice(this.members.indexOf(e),1),this}setRule(e){return this.rule=e,this}translate(e){const t=this.rule;for(const n of this.members)t(e,n);return this}}class Lt{constructor(e,t=[]){u(this,"MODULE",""),u(this,"dataContainer",new $t),u(this,"translater"),this.translater=new Rt().setRule(e),this.dataContainer.subscribe(n=>{this.translater.translate(n)});for(const n of t)this.addConfig(n)}getData(){return this.dataContainer.container}existSymbol(e){return Boolean(this.dataContainer.container[e])}addConfig(e){return this.dataContainer.container[e.vid]=e,this}getConfig(e){return this.dataContainer.container[e]}removeConfig(e){const t=this.dataContainer.container;t[e]!==void 0&&delete t[e]}addCompiler(e){return e.setTarget(this.dataContainer.container),e.compileAll(),this.translater.apply(e),this}toJSON(e=!0){return e?JSON.stringify(this.exportConfig(),D):JSON.stringify(Object.values(this.dataContainer.container),D)}exportConfig(e=!0){if(e){const t=this.dataContainer.container,n=[],s={},o=(i,a,c={})=>{for(const l in i){if(["vid","type"].includes(l)){c[l]=i[l];continue}if(typeof i[l]=="object"&&i[l]!==null){if(Array.isArray(i[l])){if(!i[l].length)continue;c[l]=i[l].map(f=>typeof f=="object"&&f!==null?T(f):f);continue}c[l]={},a[l]?(o(i[l],a[l],c[l]),Object.keys(c[l]).length===0&&delete c[l]):c[l]=T(i[l])}else a[l]!==i[l]&&(c[l]=i[l])}};for(const i of Object.values(t)){if(!s[i.type]){if(!O[i.type]){console.error(`can not font some config with: ${i.type}`);continue}s[i.type]=O[i.type]()}const a={};o(i,s[i.type],a),n.push(a)}return n}else return Object.values(T(this.dataContainer.container))}load(e){const t=this.dataContainer.container,n={},s=(o,i)=>{for(const a in i)typeof o[a]=="object"&&o[a]!==null&&typeof i[a]=="object"&&i[a]!==null?s(o[a],i[a]):o[a]===void 0&&(o[a]=i[a])};for(const o of e){if(!n[o.type]){if(!O[o.type]){console.error(`can not font some config with: ${o.type}`);continue}n[o.type]=O[o.type]()}s(o,n[o.type]),t[o.vid]=o}return this}remove(e){const t=this.dataContainer.container;for(const n of e)t[n.vid]!==void 0&&delete t[n.vid];return this}}const Nt=function(r,e){return class extends Lt{constructor(t=[]){super(e,t),u(this,"MODULE",r)}}};class Pt{constructor(e){u(this,"type"),u(this,"config"),u(this,"commands"),u(this,"create"),u(this,"dispose"),this.type=e.type,this.commands=e.commands,this.create=e.create,this.dispose=e.dispose,this.config=()=>{const t=e.config();return t.type=this.type,t},ie[this.type.toLocaleUpperCase()]=this.type,O[this.type]=this.config}process(e){if(!this.commands||!this.commands[e.operate]){this[e.operate](e);return}let t=this.commands[e.operate];for(const n of[].concat(e.path,e.key))if(!t[n]&&!t.$reg){this[e.operate](e);return}else if(t[n])if(typeof t[n]=="function"){t[n](e);return}else t=t[n];else if(t.$reg){for(const s of t.$reg)if(s.reg.test(n)){s.handler(e);return}}this[e.operate](e)}add(e){let t=e.target;const n=e.path;for(const s of n)if(typeof t[s]!==void 0)t=t[s];else{console.warn("processor can not exec default add operate.",e);return}t[e.key]=e.value}set(e){let t=e.target;const n=e.path;for(const s of n)if(typeof t[s]!==void 0)t=t[s];else{console.warn("processor can not exec default set operate.",e);return}t[e.key]=e.value}delete(e){let t=e.target;const n=e.path;for(const s of n)if(typeof t[s]!==void 0)t=t[s];else{console.warn("processor can not exec default delete operate.",e);return}delete t[e.key]}expand(e){const t=function(n,s){for(const o in s)b(s[o])&&b(n[o])?t(n[o],s[o]):(b(s[o])&&!n[o]||!b(s[o])&&!n[o])&&(n[o]=s[o])};return this.commands||(this.commands={}),t(this.commands,e),this}}const ar=r=>new Pt(r),cr=(r,e,t=ne)=>{const{operate:n,key:s,path:o,value:i}=r;let a=s;const c=o.split(".");if(c.length&&(a=c.shift()),!t(a)){console.warn(`${e.MODULE} Rule: vid is illeage: ${a}`);return}if(n==="add"&&!c.length&&a===s){e.add(i);return}if(r.operate==="delete"&&!c.length){e.remove(i);return}if(r.operate==="set"&&!c.length&&s===a){e.cover(i);return}e.compile(a,{operate:n,key:s,path:c,value:i})},ur=function(){return{vid:"",type:"",name:""}},lr=function(r){return`DEFUALT-${r}`},pr=function(){};class Tt extends B{constructor(){super(),u(this,"compilerMap",new Map)}extend(e,t=!1){this.compilerMap.has(e.MODULE)?(console.warn("compiler manager has exist this compiler",e),t&&this.compilerMap.set(e.MODULE,e)):this.compilerMap.set(e.MODULE,e)}getCompiler(e){return this.compilerMap.has(e)?this.compilerMap.get(e):(console.warn(`can not found this type in compiler manager: ${e}`),null)}getObjectSymbol(e){for(const t of this.compilerMap.values()){const n=t.getObjectSymbol(e);if(n)return n}return null}getObjectBySymbol(e){for(const t of this.compilerMap.values()){const n=t.getObjectBySymbol(e);if(n)return n}return null}getObjectfromModule(e,t){return this.compilerMap.has(e)?this.compilerMap.get(e).map.get(t)||null:(console.warn(`compiler manager can not found this module: ${e}`),null)}getObjectfromModules(e,t){Array.isArray(e)||(e=Object.keys(e));for(const n of e){if(!this.compilerMap.has(n)){console.warn(`compiler manager can not found this module: ${n}`);continue}const s=this.compilerMap.get(n);if(s.map.has(t))return s.map.get(t)}return null}dispose(){for(const e of this.compilerMap.values())e.dispose();return this.compilerMap.clear(),this}}const pe="CompilerManagerPlugin",Ut=function(){return{name:pe,install(r){const e=new Tt;r.compilerManager=e,r.getObjectSymbol=function(t){return e.getObjectSymbol(t)},r.getObjectBySymbol=function(t){return e.getObjectBySymbol(t)},r.getObjectfromModule=function(t,n){return e.getObjectfromModule(t,n)},r.getObjectfromModules=function(t,n){return e.getObjectfromModules(t,n)},r.getObject3D=function(t){return e.getObjectfromModules(H,t)}},dispose(r){r.compilerManager.dispose(),delete r.compilerManager,delete r.getObjectSymbol,delete r.getObjectBySymbol,delete r.getObjectfromModule,delete r.getObjectfromModules,delete r.getObject3D}}};class Jt extends B{constructor(){super(),u(this,"dataSupportMap",new Map)}extend(e,t=!1){this.dataSupportMap.has(e.MODULE)?(console.warn("dataSupport manager has exist this dataSupport",e),t&&this.dataSupportMap.set(e.MODULE,e)):this.dataSupportMap.set(e.MODULE,e)}getDataSupport(e){return this.dataSupportMap.has(e)?this.dataSupportMap.get(e):(console.warn(`can not found this type in dataSupportManager: ${e}`),null)}getConfigBySymbol(e){const t=this.dataSupportMap.values();for(const n of t){const s=n.getConfig(e);if(s)return s}return null}removeConfigBySymbol(...e){for(const t of e)for(const n of this.dataSupportMap.values())if(n.existSymbol(t)){n.removeConfig(t);break}return this}getModuleBySymbol(e){const t=this.dataSupportMap.values();for(const n of t)if(n.existSymbol(e))return n.MODULE;return null}applyConfig(...e){for(const t of e){const n=ae(t.type);n?this.dataSupportMap.get(n).addConfig(t):console.warn(`dataSupportManager can not found this config module: ${t.type}`)}return this}load(e){return this.dataSupportMap.forEach((n,s)=>{e[s]&&n.load(e[s])}),this}loadByModule(e,t){const n=this.dataSupportMap.get(t);return n?(n.load(e),this):(console.warn(`DataSupportManager can not support this module: ${t}`),this)}remove(e){return this.dataSupportMap.forEach((n,s)=>{e[s]&&n.remove(e[s])}),this}toJSON(e={},t=!0){return JSON.stringify(this.exportConfig(e,t),D)}exportConfig(e={},t=!0){return this.dataSupportMap.forEach((s,o)=>{e[o]=s.exportConfig(t)}),e}}const W="DataSupportManagerPlugin",_t=function(){return{name:W,install(r){const e=new Jt;r.dataSupportManager=e,r.applyConfig=function(...t){return e.applyConfig(...t),r},r.getConfigBySymbol=function(t){return e.getConfigBySymbol(t)},r.removeConfigBySymbol=function(...t){return e.removeConfigBySymbol(...t),r},r.toJSON=function(){return e.toJSON()},r.exportConfig=function(){return e.exportConfig()}},dispose(r){delete r.dataSupportManager,delete r.applyConfig,delete r.getConfigBySymbol,delete r.removeConfigBySymbol,delete r.toJSON,delete r.exportConfig}}};var fe=(r=>(r.MAPPED="mapped",r))(fe||{});class kt extends B{constructor(e={}){super(),u(this,"configMap",new Map),u(this,"resourceMap",new Map),u(this,"paserMap",new Map);const t=new Map;for(const n in e)t.has(n)&&console.warn(`resourceManager construct params rescource already exist: ${n}, that will be cover.`),t.set(n,e[n]);this.mappingResource(t)}addParser(e){return this.paserMap.has(e.constructor)?this:(this.paserMap.set(e.constructor,e),this)}mappingResource(e,t){const n=this.configMap,s=this.resourceMap,o=[...this.paserMap.values()],i={};for(const[a,c]of e.entries()){if((t==null?void 0:t.parser)&&t.parser[a]){t.parser[a].parse({url:a,resource:c,configMap:n,resourceMap:s});continue}if((t==null?void 0:t.selector)&&t.selector[a]){const f=t.selector[a](a,c,this.paserMap);if(!f){console.warn("resource manager hanlder can not found this resource parser: ",c,t.selector[a]);continue}f.parse({url:a,resource:c,configMap:n,resourceMap:s}),i[a]=this.getResourceConfig(a);continue}let l=null;for(const f of o)if(l=f.selector(a,c,this.paserMap),l)break;if(!l){console.warn("resouce manager can not found some handler to parser this resource:",c);continue}l.parse({url:a,resource:c,configMap:n,resourceMap:s}),i[a]=this.getResourceConfig(a)}return this.dispatchEvent({type:"mapped",configMap:n,resourceMap:s,resourceConfig:i}),this}getResourceConfig(e){const t=this.configMap,n={};return[...t.keys()].filter(s=>s.startsWith(e)).forEach(s=>{const o=t.get(s);if(!o)console.error(`unknow error: can not found config by url: ${s}`);else{const i=ae(o.type);i?(!n[i]&&(n[i]=[]),n[i].push(o)):console.error(`unknow error: can not found module by type: ${o.type}`,o)}}),n}hasResource(e){return this.resourceMap.has(e)}remove(e){const t=this.configMap,n=this.resourceMap;return[...t.keys()].filter(s=>s.startsWith(e)).forEach(s=>{t.delete(s);const o=n.get(s);o.dispose&&o.dispose(),n.delete(s)}),this}dispose(){this.resourceMap.forEach((e,t)=>{e.dispose&&e.dispose()}),this.resourceMap.clear(),this.configMap.clear()}}class fr{}const Je="ResourceManagerPlugin",Gt=function(r={}){return{name:Je,install(e){const t=new kt(r.resources);e.resourceManager=t,e.registerResources=n=>{const s=new Map;return Object.keys(n).forEach(o=>{s.set(o,n[o])}),t.mappingResource(s),e}},dispose(e){e.addEventListener(Ie.DISPOSE,()=>{e.resourceManager.dispose()})}}},Bt="LoaderDataSupportStrategy",It=function(){let r,e;return{name:Bt,condition:[W,xe],exec(t){r=t.toJSON,t.toJSON=function(){const n={assets:JSON.parse(t.loaderManager.toJSON())};return t.dataSupportManager.toJSON(n)},e=t.exportConfig,t.exportConfig=function(){let n={};return n={assets:t.loaderManager.exportConfig()},t.dataSupportManager.exportConfig(n)}},rollback(t){t.toJSON=r,t.exportConfig=e}}},Vt="LoaderMappingStrategy",Ht=function(){let r,e;return{name:Vt,condition:[Je,xe],exec(t){r=t.loadResources,t.loadResources=(n,s)=>{const o=i=>{s(void 0,i),t.resourceManager.removeEventListener(F.LOADED,o)};try{t.resourceManager.addEventListener(F.LOADED,o)}catch(i){s(i)}return t.loaderManager.reset().load(n),t},e=t.loadResourcesAsync,t.loadResourcesAsync=n=>new Promise((s,o)=>{try{t.loaderManager.once(F.LOADED,i=>{t.resourceManager.once(fe.MAPPED,c=>{s(c)});const a=new Map;n.forEach(c=>{typeof c=="string"?a.set(c,i.resourceMap.get(c)):a.set(c.url,i.resourceMap.get(c.url))}),t.resourceManager.mappingResource(a)})}catch(i){o(i)}t.loaderManager.reset().load(n)})},rollback(t){t.loadResources=r,t.loadResourcesAsync=e}}},Wt="CompilerSupportStrategy",Ft=function(){return{name:Wt,condition:[pe,W],exec(r){r.compilerManager.compilerMap.forEach((e,t)=>{var n;e.useEngine(r),(n=r.dataSupportManager.dataSupportMap.get(t))==null||n.addCompiler(e)})},rollback(){}}};var qt=(r=>(r[r.ZERO=0]="ZERO",r[r.ONE=100]="ONE",r[r.TWO=200]="TWO",r[r.THREE=300]="THREE",r[r.FOUR=400]="FOUR",r[r.FIVE=500]="FIVE",r[r.SIX=600]="SIX",r[r.SEVEN=700]="SEVEN",r[r.EIGHT=800]="EIGHT",r[r.NINE=900]="NINE",r))(qt||{});class Xt extends Ge{constructor(){super(),u(this,"moduleLifeCycle",[]),u(this,"moduleTriggers",[bt]),u(this,"processorExpands",[]),this.install(Ve()).install(He()).install(We()).install(Fe()).install(Gt()).install(_t()).install(Ut()),this.exec(It()).exec(Ht()).exec(Ft())}loadLifeCycle(e){const t=this.dataSupportManager,n=this.moduleTriggers,s=this.moduleLifeCycle.sort((o,i)=>o.order-i.order);for(const{module:o}of s){e[o]&&t.loadByModule(e[o],o);for(const i of n)i.updateCondition(o),i.test()&&i.trig()}}removeLifeCycle(e){const t=this.dataSupportManager,n=this.moduleLifeCycle.sort((a,c)=>c.order-a.order);for(const{module:a}of n)e[a]&&t.remove({[a]:e[a]});const s=e.assets||[],o=this.resourceManager,i=this.loaderManager;s.forEach(a=>{o.remove(a),i.remove(a)})}loadConfig(e,t){const n=this.renderManager.hasRendering();if(n&&this.renderManager.stop(),e.assets&&e.assets.length){const s=o=>{delete e.assets,this.loadLifeCycle(e),this.resourceManager.removeEventListener("mapped",s),t&&t(o),n?this.renderManager.play():this.renderManager.render()};this.resourceManager.addEventListener("mapped",s),this.loaderManager.reset().load(e.assets)}else this.loadLifeCycle(e),t&&t(),n?this.renderManager.play():this.renderManager.render();return this}loadConfigAsync(e,t){return new Promise((n,s)=>{const o=this.renderManager.hasRendering();o&&this.renderManager.stop(),e.assets&&e.assets.length?this.loadResourcesAsync(e.assets).then(i=>{delete e.assets,this.loadLifeCycle(e),o?this.renderManager.play():this.renderManager.render(),n(i)}):(this.loadLifeCycle(e),o?this.renderManager.play():this.renderManager.render(),n({type:fe.MAPPED,configMap:this.resourceManager.configMap,resourceMap:this.resourceManager.resourceMap,resourceConfig:{}}))})}removeConfig(e){this.removeLifeCycle(e)}getObjectConfig(e){const t=this.getObjectSymbol(e);return t?this.getConfigBySymbol(t):null}registModule(e){if(Me[e.type.toLocaleUpperCase()])return console.warn(`module ${e.type} is already exist.`),this;Me[e.type.toLocaleUpperCase()]=e.type,e.object&&(H[e.type]=!0);const t=Nt(e.type,e.rule),n=Mt(e.type,e.compiler,e.processors);for(const i of e.processors)Re(i,e.type);const s=new n,o=new t([]);this.dataSupportManager.extend(o),this.compilerManager.extend(s),s.useEngine(this),o.addCompiler(s),e.extend&&e.extend(this),e.processors.forEach(i=>{}),e.expand&&this.processorExpands.push(...e.expand);for(const i of this.processorExpands)Array.isArray(i.processors)?Object.values(ee).forEach(a=>{i.processors.includes(a.type)&&a.expand(i.command)}):Object.values(ee).forEach(a=>{i.processors.test(a.type)&&a.expand(i.command)});return this.moduleLifeCycle.push({module:e.type,order:e.lifeOrder||0}),this.moduleTriggers.forEach(i=>{i.registerModule(e.type)}),this}}const hr=function(r){const e=new Xt;return r.modules&&r.modules.forEach(t=>{e.registModule(t)}),r.plugins&&r.plugins.forEach(t=>{e.install(t)}),r.strategy&&r.strategy.forEach(t=>{e.exec(t)}),e},g=class{static generateConfig(r,e){if(!g.configLibrary.has(r))return console.warn(`event library can not found config by name: ${r}`),{name:""};const t=(s,o)=>{for(const i in o)s[i]!==void 0&&(typeof o[i]=="object"&&o[i]!==null&&!Array.isArray(o[i])?t(s[i],o[i]):s[i]=o[i])},n=JSON.parse(JSON.stringify(g.configLibrary.get(r)));return t(n,e),n}static generateScript(r,e,t,n){return g.generatorLibrary.has(n.name)?g.generatorLibrary.get(n.name)(r,e,t,n):(console.error(`event library can not found generator by name: ${n.name}`),()=>{})}static has(r){return g.configLibrary.has(r)}};let he=g;u(he,"configLibrary",new Map);u(he,"generatorLibrary",new Map);u(he,"register",function({config:r,generator:e}){return g.configLibrary.has(r.name)?(console.warn(`EventLibrary has already exist this event generator: ${r.name}, that will be cover.`),g):(g.configLibrary.set(r.name,JSON.parse(JSON.stringify(r))),g.generatorLibrary.set(r.name,e),g)});const m=class{static generateConfig(r,e){if(!m.configLibrary.has(r))return console.warn(`event library can not found config by name: ${r}`),{name:""};const t=(s,o)=>{for(const i in o)typeof o[i]=="object"&&o[i]!==null&&!Array.isArray(o[i])?t(s[i],o[i]):s[i]=o[i]},n=JSON.parse(JSON.stringify(m.configLibrary.get(r)));return t(n,e),n}static generateEvent(r,e){return m.generatorLibrary.has(r.name)?m.generatorLibrary.get(r.name)(e,r):(console.error(`event library can not found generator by name: ${r.name}`),()=>{})}static has(r){return m.configLibrary.has(r)}};let de=m;u(de,"configLibrary",new Map);u(de,"generatorLibrary",new Map);u(de,"register",function({config:r,generator:e}){return m.configLibrary.has(r.name)?(console.warn(`EventGeneratorManager has already exist this event generator: ${r.name}, that will be cover.`),m):(m.configLibrary.set(r.name,JSON.parse(JSON.stringify(r))),m.generatorLibrary.set(r.name,e),m)});const S=class{static getShader(r){return S.library.has(r)?S.cloneShader(S.library.get(r)):(console.warn(`con not found shader in shader library: ${r}`),null)}static generateConfig(r,e){if(!S.library.has(r))return console.warn(`con not found shader in shader library: ${r}`),{shader:r,uniforms:{}};const t=S.library.get(r),n={shader:r,uniforms:{}};if(t.uniforms&&(n.uniforms=JSON.parse(JSON.stringify(t.uniforms))),e){const s=(o,i)=>{for(const a in i)o[a]!==void 0&&(typeof i[a]=="object"&&i[a]!==null&&!Array.isArray(i[a])?(o[a]===null&&(o[a]={...i[a]}),s(o[a],i[a])):o[a]=i[a])};s(n.uniforms,e)}return n}static cloneShader(r){const e={name:r.name};return r.vertexShader&&(e.vertexShader=r.vertexShader),r.fragmentShader&&(e.fragmentShader=r.fragmentShader),r.uniforms&&(e.uniforms=JSON.parse(JSON.stringify(r.uniforms))),e}};let _e=S;u(_e,"library",new Map);u(_e,"register",function(r){S.library.has(r.name)&&console.warn(`shader library has exist shader: ${r.name} that will be cover.`),S.library.set(r.name,r)});const dr=[pe,W];export{he as A,sr as B,pe as C,W as D,Xt as E,Me as M,H as O,dr as P,cr as R,qt as S,ie as a,ir as b,fr as c,ar as d,O as e,Ee as f,y as g,ur as h,nr as i,pr as j,de as k,bt as l,vt as m,_e as n,hr as o,or as p,Dt as q,jt as r,tr as s,rr as t,lr as u,ne as v};
